# Chrome Extension React + Vite è„šæ‰‹æ¶

ä¸€ä¸ªç”¨äºå¿«é€Ÿå¼€å‘ Chrome Extension çš„è„šæ‰‹æ¶ï¼Œä½¿ç”¨ React + Vite æ„å»ºï¼Œæ”¯æŒçƒ­é‡è½½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âš¡ï¸ çº¯ Vite + Reactï¼Œæ— é¢å¤–æ’ä»¶ä¾èµ–
- âš›ï¸ React 18 æ”¯æŒ
- ğŸ”¥ å¼€å‘æ¨¡å¼æ”¯æŒçƒ­é‡è½½ï¼ˆæ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡å»ºï¼‰
- ğŸ“¦ TypeScript æ”¯æŒ
- ğŸ¨ ç°ä»£åŒ– UI æ¨¡æ¿
- ğŸ§­ æ”¯æŒ New Tab / History / Bookmarks é¡µé¢
- ğŸ› ï¸ å®Œå…¨å¯è‡ªå®šä¹‰çš„æ„å»ºé…ç½®

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ manifest.json      # Chrome Extension é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ popup.html         # Popup é¡µé¢ HTML
â”‚   â”œâ”€â”€ popup.tsx          # Popup é¡µé¢ React ç»„ä»¶
â”‚   â”œâ”€â”€ popup.css          # Popup é¡µé¢æ ·å¼
â”‚   â”œâ”€â”€ background.ts      # Service Worker åå°è„šæœ¬
â”‚   â””â”€â”€ content.ts         # Content Script å†…å®¹è„šæœ¬
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ dev.js             # å¼€å‘æ¨¡å¼è„šæœ¬ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
â”œâ”€â”€ vite.config.ts         # Vite é…ç½®æ–‡ä»¶
â”œâ”€â”€ tsconfig.json          # TypeScript é…ç½®
â””â”€â”€ package.json
```

## å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®

```bash
npx create-extension-react my-extension
```

å®‰è£…æ—¶ä¼šæç¤ºé€‰æ‹© `newtab` / `history` / `bookmarks` ä¸‰é€‰ä¸€ï¼Œå¹¶åªç”Ÿæˆå¯¹åº”æ¨¡æ¿ã€‚

ä¹Ÿå¯ä»¥é€šè¿‡å‚æ•°ç›´æ¥æŒ‡å®šç±»å‹ï¼š

```bash
npx create-extension-react my-extension --type newtab
```

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰

```bash
npm run dev
```

å¼€å‘æ¨¡å¼ä¼šï¼š

1. è‡ªåŠ¨ç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶é‡æ–°æ„å»º
2. è‡ªåŠ¨å¤åˆ¶ `manifest.json` åˆ° `dist` ç›®å½•
3. åœ¨ Chrome ä¸­åŠ è½½æ‰©å±•åï¼Œä¿®æ”¹ä»£ç ä¼šè‡ªåŠ¨é‡å»ºï¼Œåˆ·æ–°æ‰©å±•å³å¯çœ‹åˆ°æ›´æ–°

**åœ¨ Chrome ä¸­åŠ è½½æ‰©å±•ï¼š**

1. æ‰“å¼€ Chrome æµè§ˆå™¨
2. è®¿é—® `chrome://extensions/`
3. å¼€å¯"å¼€å‘è€…æ¨¡å¼"
4. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
5. é€‰æ‹©é¡¹ç›®çš„ `dist` ç›®å½•
6. å¼€å‘æ—¶ï¼Œä¿®æ”¹ä»£ç åç‚¹å‡»æ‰©å±•çš„åˆ·æ–°æŒ‰é’®å³å¯çœ‹åˆ°æ›´æ–°

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºå®Œæˆåï¼Œ`dist` ç›®å½•å°±æ˜¯å¯ä»¥æ‰“åŒ…çš„æ‰©å±•æ–‡ä»¶ã€‚

**æ³¨æ„ï¼š**

- `npm run dev` - å¼€å‘æ¨¡å¼ï¼Œä»£ç **ä¸å‹ç¼©**ï¼Œæ„å»ºé€Ÿåº¦å¿«ï¼Œä¾¿äºè°ƒè¯•
- `npm run build` - ç”Ÿäº§æ¨¡å¼ï¼Œä»£ç **ä¼šå‹ç¼©**ï¼Œæ–‡ä»¶ä½“ç§¯å°ï¼Œé€‚åˆå‘å¸ƒ

## å¼€å‘è¯´æ˜

### çƒ­é‡è½½

åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼ˆ`npm run dev`ï¼‰ï¼Œä¿®æ”¹ä»£ç åï¼š

1. Vite ä¼šè‡ªåŠ¨ç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶é‡æ–°æ„å»ºåˆ° `dist` ç›®å½•
2. `manifest.json` ä¹Ÿä¼šè‡ªåŠ¨åŒæ­¥åˆ° `dist` ç›®å½•
3. åœ¨ Chrome æ‰©å±•ç®¡ç†é¡µé¢ç‚¹å‡»æ‰©å±•çš„åˆ·æ–°æŒ‰é’®å³å¯çœ‹åˆ°æ›´æ–°

### è‡ªå®šä¹‰é…ç½®

è¿™æ˜¯ä¸€ä¸ªçº¯ Vite + React çš„é…ç½®ï¼Œä½ å¯ä»¥å®Œå…¨è‡ªå®šä¹‰ï¼š

- **ä¿®æ”¹æ„å»ºé…ç½®**ï¼šç¼–è¾‘ `vite.config.ts`
- **æ·»åŠ æ–°é¡µé¢**ï¼šåœ¨ `src` ç›®å½•åˆ›å»ºæ–‡ä»¶ï¼Œç„¶ååœ¨ `vite.config.ts` çš„ `rollupOptions.input` ä¸­æ·»åŠ å…¥å£ç‚¹
- **ä¿®æ”¹å¼€å‘è„šæœ¬**ï¼šç¼–è¾‘ `scripts/dev.js`

### é¡µé¢è¦†ç›–

é¡¹ç›®å†…ç½® 1 ä¸ªé¡µé¢ï¼š

- `newtab`ï¼šæ–°æ ‡ç­¾é¡µ

å¯¹åº”å…¥å£æ–‡ä»¶ï¼š

- `src/newtab.html` â†’ `src/newtab/index.tsx`
### ä½¿ç”¨ Chrome API

é¡¹ç›®å·²é…ç½® TypeScript ç±»å‹æ”¯æŒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Chrome APIï¼š

```typescript
chrome.tabs.query({ active: true }, (tabs) => {
  console.log(tabs);
});
```

## è®¸å¯è¯

MIT
